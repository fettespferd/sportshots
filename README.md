# SportShots - Professionelle Plattform für Sportfotografie

Eine moderne, Multi-Rollen-Plattform für Sportfotografen, Event-Veranstalter und Athleten. Fotografen können Events erstellen, Fotos hochladen und verkaufen. Athleten finden ihre Fotos über intelligente Suchfunktionen und kaufen sie direkt über die Plattform.

---

## 🎯 Zielgruppen & Anwendungsfälle

### 👥 Primäre Zielgruppen

#### 1. **Professionelle Sportfotografen**
- Fotografen, die regelmäßig bei Sportevents fotografieren
- Freiberufler, die ihr Portfolio präsentieren und Fotos verkaufen möchten
- Agenturen mit mehreren Fotografen im Team
- **Nutzen**: Automatisierte Verkaufsprozesse, professionelles Portfolio, direkte Auszahlungen

#### 2. **Surf- & Ski-Schulen**
- Schulen, die Event-Fotos für ihre Teilnehmer anbieten
- Branding-Möglichkeiten durch individuelle Profile
- Einfache QR-Code-Verlinkung für schnellen Zugang
- **Nutzen**: Zusätzliche Einnahmequelle, Marketing-Tool, Kundenbindung

#### 3. **Event-Veranstalter**
- Marathon-, Triathlon- und Lauf-Veranstalter
- CrossFit- und Hyrox-Events
- Radsport-Veranstaltungen
- Ski- und Wintersport-Events
- **Nutzen**: Foto-Service für Teilnehmer, zusätzliche Revenue-Quelle

#### 4. **Athleten & Sportbegeisterte**
- Teilnehmer an Sportevents (Läufer, Triathleten, etc.)
- Hobby-Sportler, die professionelle Fotos ihrer Leistung suchen
- Eltern von jungen Athleten
- **Nutzen**: Einfache Foto-Suche, sichere Bezahlung, sofortiger Download

#### 5. **Team-Accounts & Organisationen**
- Sportvereine mit mehreren Fotografen
- Foto-Agenturen mit Team-Struktur
- Große Event-Veranstalter mit eigenem Branding
- **Nutzen**: Zentrale Verwaltung, einheitliches Branding, Team-Kollaboration

### 💼 Business Cases

#### **B2C: Direktverkauf an Athleten**
- Einzelpersonen kaufen ihre Sportfotos direkt
- Durchschnittspreis: 5-15€ pro Foto
- Paketangebote für Mehrfach-Käufe

#### **B2B: Event-Fotografie-Service**
- Fotografen bieten ihre Services über die Plattform an
- Event-Veranstalter engagieren Fotografen
- White-Label-Möglichkeiten für große Events

#### **B2B2C: Schulen & Vereine**
- Surf-/Ski-Schulen bieten Fotos als Zusatzservice
- Vereine dokumentieren ihre Events
- Automatische Vermarktung über QR-Codes und Links

---

## 🎯 Features

### Für Athleten & Endkunden

#### 🔍 **Intelligente Foto-Suche**
- **Event-Suche**: Finde Events nach Datum, Ort, Name oder Fotograf
- **Startnummer-Filterung**: Filtere sofort nach deiner Startnummer
- **Datum/Zeit-Filter**: Finde Fotos nach Aufnahmezeitpunkt
- **Gesichtserkennung (Selfie-Suche)**: Lade ein Selfie hoch und finde automatisch alle deine Fotos
- **Fotografen-Suche**: Durchsuche Profile von Fotografen und Teams

#### 📸 **Moderne Foto-Galerie**
- Wasserzeichen-Vorschau zum Schutz der Fotografen
- Lightbox-Ansicht mit Zoom-Funktionalität (auch auf Mobile)
- Bild-Rotation für optimal gedrehte Fotos
- Warenkorb-System mit visueller Nummerierung
- Responsive Design für alle Geräte

#### 💳 **Sicherer Kaufprozess**
- Stripe Checkout Integration
- Einzelfoto-Kauf oder Pakete
- Gastkauf ohne Registrierung (nur E-Mail)
- Sofortiger Download nach Zahlung
- E-Mail mit Download-Link
- Bestellverwaltung für registrierte Nutzer

#### 📱 **Sharing & Social**
- Web Share API Integration
- Event-Links teilen
- Einzelne Fotos teilen
- QR-Code Zugang zu Events
- Mobile-optimierte Erfahrung

---

### Für Fotografen & Content Creator

#### 📊 **Event-Management**
- Erstelle und verwalte unbegrenzt viele Events
- Verschiedene Event-Typen (Running, Cycling, Skiing, Surfing, Triathlon, CrossFit, Hyrox, uvm.)
- Flexible Preisgestaltung (Einzelpreise + Paketangebote)
- Cover-Bilder für professionelle Präsentation
- Automatische URL-Generierung (SEO-optimiert)

#### 🖼️ **Professionelle Bildverwaltung**
- **Multi-Upload**: Lade mehrere Fotos gleichzeitig hoch
- **Automatische Wasserzeichen-Generierung**: Schutz deiner Arbeit
- **OCR-Erkennung**: Startnummern werden automatisch erkannt
- **Bild-Rotation**: Drehe Fotos links/rechts direkt in der Plattform
- **Batch-Operationen**: Mehrere Fotos gleichzeitig löschen
- **Drag & Drop**: Bilder per Drag & Drop neu sortieren
- **Lazy Loading**: Optimierte Performance für große Galerien

#### 👤 **Öffentliches Profil & Portfolio**
- Eigene URL: `sportshots.com/dein-name`
- QR-Code für einfachen Zugang
- Portfolio-Galerie (bis zu 10 Beispielbilder)
- Professionelles Branding mit Logo
- Event-Übersicht auf Profilseite
- Shareable Links für Social Media

#### 💰 **Verkauf & Auszahlung**
- **Stripe Connect Integration**: Verknüpfe dein Bankkonto
- **Automatische Auszahlungen**: Geld geht direkt auf dein Konto
- **Verkaufsstatistiken**: Dashboard mit Umsatz und Verkaufszahlen
- **Analytics**: Detaillierte Charts (Recharts) mit Insights
- **Sales-Übersicht**: Siehe alle Verkäufe mit Käufer-E-Mail
- **Transparente Provisionen**: Plattform-Fee wird automatisch abgezogen

#### 📧 **Automatisierung & Benachrichtigungen**
- E-Mail bei Verkäufen
- Download-Links automatisch an Käufer
- Stripe Connect Onboarding-Erinnerungen

---

### Für Teams & Organisationen

#### 👥 **Team-Accounts**
- Erstelle ein Team-Profil
- Lade mehrere Fotografen ein (Sub-Accounts)
- Alle Events erscheinen automatisch auf Team-Seite
- Einheitliches Branding (Team-Logo)
- Zentrale Team-Verwaltung

#### 🎨 **Custom Branding**
- Team-Logo Upload
- Individuelle Profilseiten
- QR-Codes für Events
- Professional Appearance

#### 🔗 **Team-Collaboration**
- Fotografen-Einladungen per E-Mail
- Team-Member können akzeptieren/ablehnen
- Jeder Fotograf behält seine eigenen Events
- Shared Visibility auf Team-Seite

---

### Für Admins & Plattform-Betreiber

#### 🛡️ **Plattform-Verwaltung**
- Fotografen-Freischaltung & Genehmigung
- Account-Aktivierung/Sperrung
- Plattform-weite Analytics
- Umsatz-Übersicht

#### 📈 **Revenue Management**
- Provisionsverwaltung (Standard: 15%)
- Plattform-Einnahmen Dashboard
- Fotografen-Auszahlungen Übersicht
- Transaktions-Historie

#### 📧 **Kommunikation**
- Automatische E-Mail-Benachrichtigungen
- Account-Status Updates
- Fotografen-Freischaltungen

---

## 🛠️ Tech Stack

### Frontend
- **Framework**: Next.js 16 (App Router) mit React 19
- **Styling**: Tailwind CSS 4
- **TypeScript**: Vollständig typsicher
- **Komponenten**: Custom UI Components + Radix UI
- **Drag & Drop**: @dnd-kit
- **Charts**: Recharts

### Backend & Services
- **Backend**: Supabase (Auth, Database, Storage, RLS)
- **Payments**: Stripe Connect (Fotografen-Auszahlungen)
- **AI/ML**: AWS Rekognition (OCR & Gesichtserkennung)
- **Bildverarbeitung**: Sharp (Wasserzeichen, Thumbnails)
- **E-Mail**: Resend (Transaktions-E-Mails)

### Security & Performance
- Row Level Security (RLS) auf allen Tabellen
- JWT-basierte Authentifizierung
- Image Optimization
- Lazy Loading
- CDN via Supabase Storage

---

## 📋 Voraussetzungen

- **Node.js** 20+ und npm
- **Supabase Account** (kostenlos verfügbar)
- **Stripe Account** (für Zahlungen & Fotografen-Auszahlungen)
- **AWS Account** (für OCR & Gesichtserkennung)
- **Resend Account** (für E-Mail-Benachrichtigungen)

---

## 🚀 Installation & Setup

### 1. Repository klonen

```bash
git clone <repository-url>
cd sportshots
npm install
```

### 2. Supabase Projekt erstellen

1. Gehe zu [supabase.com](https://supabase.com) und erstelle ein neues Projekt
2. Warte, bis das Projekt fertig eingerichtet ist (ca. 2 Minuten)
3. Gehe zu **Settings** → **API**
4. Kopiere die `Project URL` und den `anon public` Key

### 3. Umgebungsvariablen einrichten

Erstelle eine `.env.local` Datei im Root-Verzeichnis:

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# App
NEXT_PUBLIC_APP_URL=http://localhost:3000
PLATFORM_FEE_PERCENTAGE=15

# Stripe (Required)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# AWS Rekognition (Required for OCR & Face Recognition)
# ⚠️ WICHTIG: Siehe AWS_SETUP.md für detaillierte Einrichtungsanleitung!
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=eu-central-1

# Resend (Required for email)
RESEND_API_KEY=re_...
RESEND_FROM_EMAIL=noreply@yourdomain.com
```

### 4. Datenbank-Migrationen ausführen

1. Öffne dein Supabase Projekt
2. Gehe zu **SQL Editor**
3. Erstelle ein neues Query
4. Kopiere den Inhalt von `src/supabase/migrations/20250101000000_initial_schema.sql`
5. Führe die Migration aus
6. Wiederhole für alle weiteren Migrations-Dateien in chronologischer Reihenfolge

### 5. Ersten Admin-User erstellen

Nach dem ersten Signup kannst du einen User zum Admin machen:

1. Gehe zu **Supabase Dashboard** → **Table Editor** → **profiles**
2. Finde deinen User und ändere:
   - `role` → `admin`
3. Speichern

### 6. Development Server starten

```bash
npm run dev
```

Öffne [http://localhost:3000](http://localhost:3000) im Browser.

---

## 📁 Projektstruktur

```
src/
├── app/
│   ├── (auth)/              # Auth-Seiten (Login, Signup, Callback)
│   ├── (dashboard)/         # Geschützte Dashboard-Seiten
│   │   ├── photographer/    # Fotografen-Dashboard
│   │   │   ├── events/      # Event-Management
│   │   │   ├── sales/       # Verkaufs-Übersicht
│   │   │   ├── settings/    # Profil & Team-Einstellungen
│   │   │   └── team/        # Team-Verwaltung
│   │   ├── admin/           # Admin-Dashboard
│   │   │   ├── photographers/ # Fotografen-Freischaltung
│   │   │   └── revenue/     # Umsatz-Übersicht
│   │   └── orders/          # User-Bestellungen
│   ├── (public)/            # Öffentliche Seiten
│   │   ├── event/[slug]/    # Event-Galerie-Seiten
│   │   ├── downloads/[token]/ # Download-Seiten
│   │   └── search/          # Event & Fotografen-Suche
│   ├── [username]/          # Öffentliche Fotografen-Profile
│   └── api/                 # API Routes
│       ├── checkout/        # Stripe Checkout
│       ├── stripe/          # Stripe Webhooks & Connect
│       ├── photos/          # Foto-Verarbeitung
│       └── team/            # Team-Verwaltung
├── components/
│   ├── layout/              # Layout-Komponenten (Header, Footer, etc.)
│   ├── settings/            # Settings-Komponenten
│   ├── ui/                  # Basis UI-Komponenten
│   │   ├── lightbox.tsx     # Foto-Detailansicht
│   │   ├── modal.tsx        # Modal-Dialog
│   │   └── share-button.tsx # Share-Funktionalität
│   └── ...                  # Feature-spezifische Komponenten
├── lib/
│   ├── supabase/            # Supabase Client & Middleware
│   ├── stripe/              # Stripe Integration
│   ├── aws/                 # AWS Rekognition
│   ├── image/               # Bildverarbeitung (Watermark)
│   └── utils/               # Helper-Funktionen
└── supabase/
    ├── migrations/          # Datenbank-Migrationen
    └── functions/           # Edge Functions (optional)
```

---

## 🔐 Benutzer-Rollen & Permissions

### **Athlete (Standard User)**
- Registrierung ohne Freischaltung
- Event-Suche & Foto-Kauf
- Bestellverwaltung
- Selfie-Upload für Gesichtserkennung

### **Photographer (Individual)**
- Registrierung mit automatischer Freischaltung
- Event-Management (unbegrenzt)
- Foto-Upload & Verkauf
- Stripe Connect Anbindung
- Verkaufsstatistiken & Analytics
- Öffentliches Profil mit Portfolio

### **Team Account**
- Alle Photographer-Features
- Team-Mitglieder einladen
- Zentrales Team-Profil
- Einheitliches Branding
- Gemeinsame Event-Übersicht

### **Admin**
- Voller Plattform-Zugriff
- Fotografen-Verwaltung
- Plattform-Analytics
- Revenue-Übersicht
- Account-Aktivierung/Sperrung

---

## 🗂️ Datenbank-Schema

### Haupttabellen

#### `profiles`
Erweiterte User-Profile mit Rollen, Branding und Team-Informationen

#### `events`
Sportevents mit Cover-Image, Preisen, Slug und Metadaten

#### `photos`
Hochgeladene Fotos mit Wasserzeichen-URL, Original-URL, Startnummer, EXIF-Daten und Rotation

#### `purchases`
Käufe/Transaktionen mit Stripe-IDs, Status und Download-Tokens

#### `purchase_photos`
Verknüpfung zwischen Käufen und Fotos

#### `gallery_images`
Portfolio-Bilder für Fotografen-Profile (max. 10 pro Fotograf)

#### `team_invitations`
Einladungen für Team-Mitglieder mit Status-Tracking

### Storage Buckets

- **photos**: Event-Fotos (Original + Wasserzeichen)
- **event-covers**: Event-Cover-Bilder
- **avatars**: Profilbilder
- **team-logos**: Team-Logos

---

## 🎨 Key Features im Detail

### 🤖 Automatische Startnummer-Erkennung (OCR)
- AWS Rekognition Integration
- Automatische Extraktion von Zahlen aus Fotos
- Manuelle Korrektur vor Upload möglich
- Unterstützt alle gängigen Startnummern-Formate

### 😊 Gesichtserkennung (Face Search)
- Upload eines Selfies
- Vergleich mit allen Event-Fotos
- AWS Rekognition Face Matching
- Privacy-First: Selfies werden nicht gespeichert

### 🎨 Dynamische Wasserzeichen
- Automatische Generierung mit Sharp
- Diagonales Muster für Schutz
- Benutzerdefinierter Text (z.B. Fotografenname)
- Optimale Balance zwischen Schutz und Sichtbarkeit

### 📱 Mobile-First Design
- Touch-optimierte UI
- Pinch-to-Zoom in Lightbox
- Safe-Area Support (iOS)
- Responsive Checkout
- Optimierte Input-Felder (16px für iOS)

### 🔄 Bildverwaltung
- Batch-Upload mehrerer Fotos
- Batch-Delete mit Bestätigung
- Drag & Drop Sortierung
- Bild-Rotation (links/rechts)
- Lazy Loading für Performance

### 🔗 QR-Codes & Sharing
- Automatische QR-Code-Generierung für Events
- Web Share API Integration
- Event-Links teilen
- Einzelne Fotos teilen
- Link-Kopie als Fallback

---

## 📊 Analytics & Reporting

### Für Fotografen
- Verkaufsstatistiken mit Charts
- Umsatz-Übersicht
- Verkaufte Fotos pro Event
- Zeitlicher Verlauf
- Bestseller-Events

### Für Admins
- Plattform-weite Analytics
- Gesamtumsatz
- Fotografen-Performance
- Transaktions-Historie
- Provisionsverwaltung

---

## 💰 Monetarisierung & Business Model

### Revenue Streams

#### 1. **Plattform-Provision**
- Standard: 15% auf jeden Verkauf
- Transparent im Dashboard sichtbar
- Automatische Abrechnung via Stripe

#### 2. **Premium-Accounts** (Zukünftig)
- Team-Accounts mit erweiterten Features
- Priority Support
- Custom Branding
- Higher Storage Limits

#### 3. **B2B-Lizenzen** (Zukünftig)
- White-Label-Lösungen für große Events
- Custom Domains
- Enterprise-Support

### Pricing-Beispiele

**Einzelfoto-Verkauf:**
- Fotograf setzt Preis: 10€
- Plattform-Fee: 1,50€ (15%)
- Stripe-Fee: ~0,30€
- Netto an Fotografen: 8,20€

**Paket (3 Fotos):**
- Fotograf setzt Preis: 25€
- Plattform-Fee: 3,75€ (15%)
- Stripe-Fee: ~0,50€
- Netto an Fotografen: 20,75€

---

## 🚧 Roadmap

### ✅ **Phase 1-7: Foundation & Core Features** (Abgeschlossen)
- [x] Datenbank-Schema & Migrations
- [x] Auth-System mit Rollen
- [x] Fotografen-Dashboard
- [x] Öffentliche Event-Seiten
- [x] Admin-Dashboard
- [x] Stripe Integration
- [x] AWS Rekognition (OCR & Face Search)
- [x] Wasserzeichen-Generierung
- [x] E-Mail-Benachrichtigungen
- [x] Analytics Dashboard
- [x] Team-Accounts
- [x] Fotografen-Profile
- [x] Mobile-Optimierung
- [x] Share-Funktionalität
- [x] Bildverwaltung (Rotation, Batch-Upload/Delete)

### 🚀 **Phase 8: Erweiterungen** (In Arbeit)
- [ ] Event-Kalender-Integration
- [ ] Social Sharing Optimization
- [ ] SEO-Optimierung
- [ ] Performance-Monitoring

### 🔮 **Phase 9: Premium-Features** (Geplant)
- [ ] Custom Domains für Teams
- [ ] White-Label-Lösungen
- [ ] Video-Support
- [ ] Live-Event-Updates
- [ ] Mobile App (React Native)
- [ ] Automatische Foto-Tagging mit AI
- [ ] Multi-Currency Support
- [ ] Subscription-Model für Fotografen

---

## 🤝 Entwicklung

### Development Commands

```bash
# Development Server
npm run dev

# Build für Production
npm run build

# Production Server starten
npm start

# Type Checking
npm run type-check

# Linting
npm run lint
```

### Empfohlene Tools
- **VS Code** mit TypeScript/React Extensions
- **Supabase CLI** für lokale Entwicklung
- **Stripe CLI** für Webhook-Testing

---

## 📄 Weitere Dokumentation

- **[SETUP-GUIDE.md](./SETUP-GUIDE.md)**: Detaillierte Setup-Anleitung
- **[AWS_SETUP.md](./AWS_SETUP.md)**: AWS Rekognition Konfiguration
- **Supabase Migrations**: `src/supabase/migrations/`

---

## 🔒 Security & Compliance

- **HTTPS-only** in Production
- **Row Level Security (RLS)** auf allen Tabellen
- **JWT-basierte Authentifizierung**
- **Stripe PCI-Compliant Checkout**
- **DSGVO-konform**: Siehe `/datenschutz` und `/impressum`
- **Secure Image Storage** mit Supabase
- **Input Validation** auf allen Forms
- **SQL Injection Prevention** via Supabase Client

---

## 📞 Support & Community

Für Fragen, Bug-Reports oder Feature-Requests, bitte ein Issue erstellen oder Kontakt aufnehmen.

---

## 📝 Lizenz

Dieses Projekt ist privat und proprietär. Alle Rechte vorbehalten.

---

## 🎉 Credits

**Entwickelt mit:**
- [Next.js](https://nextjs.org/)
- [Supabase](https://supabase.com/)
- [Stripe](https://stripe.com/)
- [AWS Rekognition](https://aws.amazon.com/rekognition/)
- [Sharp](https://sharp.pixelplumbing.com/)
- [Tailwind CSS](https://tailwindcss.com/)
- [Resend](https://resend.com/)

---

**Version**: 1.0.0  
**Letztes Update**: Januar 2025
